---
description: 프롬프트를 분석하고 GUI 기반 HITL 방식으로 최적화합니다
---

# Prompt Optimizer Command

사용자의 프롬프트를 Human-in-the-Loop 방식으로 최적화합니다.
**반드시 AskUserQuestion 도구를 사용하여 GUI 형태로 사용자와 상호작용하세요.**

## 입력 프롬프트
$ARGUMENTS

## 실행 절차

### Step 1: 프롬프트 평가
입력된 프롬프트를 다음 기준으로 0-100점 평가:
- 명확성 (25점): 요청이 구체적이고 명확한가?
- 맥락 (25점): 충분한 배경 정보가 제공되었는가?
- 목표 (25점): 원하는 결과물이 분명한가?
- 제약조건 (25점): 필요한 제한사항이 명시되었는가?

평가 결과를 사용자에게 보여주세요:
```
📊 프롬프트 평가 결과
━━━━━━━━━━━━━━━━━━━━━
점수: {score}/100
모드: {60점 미만이면 "직접 입력", 60점 이상이면 "객관식"}
```

### Step 2: 점수별 GUI 상호작용

#### 60점 미만 (직접 입력 모드)
AskUserQuestion 도구를 사용하여 보충이 필요한 내용을 안내하고 사용자 입력을 받으세요:

```
질문: "프롬프트 보충이 필요합니다. 다음 중 추가할 정보를 선택하거나 직접 입력해주세요."
header: "보충 정보"
options:
  - label: "목적/용도 추가"
    description: "이 프롬프트의 목적이나 사용 용도를 명시"
  - label: "대상/독자 지정"
    description: "결과물의 대상 독자나 사용자를 지정"
  - label: "형식/포맷 명시"
    description: "원하는 출력 형식이나 포맷을 지정"
  - label: "제약조건 추가"
    description: "길이, 스타일, 기술 수준 등 제한사항 명시"
multiSelect: false
```

사용자가 "Other"를 선택하면 직접 입력한 내용을 반영합니다.

#### 60점 이상 (객관식 모드)
AskUserQuestion 도구를 사용하여 프롬프트 구체화를 위한 객관식 질문을 제시하세요:

프롬프트 내용을 분석하여 가장 효과적인 질문을 생성합니다.
예시:
```
질문: "코드의 주요 목적은 무엇인가요?"
header: "목적"
options:
  - label: "데이터 처리/분석"
    description: "데이터를 수집, 가공, 분석하는 코드"
  - label: "웹 개발"
    description: "웹사이트나 웹 애플리케이션 개발"
  - label: "자동화/스크립트"
    description: "반복 작업 자동화나 시스템 스크립트"
  - label: "API/백엔드"
    description: "API 서버나 백엔드 로직 개발"
multiSelect: false
```

### Step 3: 프롬프트 개선
사용자의 선택을 반영하여 프롬프트를 자연스럽게 개선합니다.
개선된 프롬프트를 보여주고 다시 Step 1로 돌아가 재평가합니다.

### Step 4: 반복 및 종료
다음 조건 중 하나를 만족하면 종료:
- **점수 ≥ 90점**: 프롬프트가 충분히 구체적
- **객관식 질문 5회 완료**: 최대 반복 횟수 도달

### Step 5: 최종 확인
최적화 완료 후 AskUserQuestion으로 최종 확인:

```
질문: "최적화가 완료되었습니다. 이 프롬프트로 실행할까요?"
header: "실행 확인"
options:
  - label: "예, 실행합니다"
    description: "최적화된 프롬프트로 LLM 응답을 생성합니다"
  - label: "아니오, 종료합니다"
    description: "프롬프트만 확인하고 종료합니다"
multiSelect: false
```

"예"를 선택하면 최종 프롬프트로 응답을 생성합니다.

## 출력 형식

### 진행 중
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 현재 점수: {score}/100 | 질문: {count}/5회
📄 현재 프롬프트:
{current_prompt}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 완료
```
═══════════════════════════════════════════════════
✨ 프롬프트 최적화 완료!
═══════════════════════════════════════════════════
📊 최종 점수: {score}/100
🔄 질문 횟수: {count}회

🎯 최종 프롬프트:
───────────────────────────────────────────────────
{final_prompt}
───────────────────────────────────────────────────
═══════════════════════════════════════════════════
```

## 중요 사항
- **반드시 AskUserQuestion 도구를 사용**하여 GUI 형태로 질문하세요
- 각 질문의 options는 2-4개로 구성하세요
- 사용자가 "Other"를 선택하면 자유 입력을 허용하세요
- 매 반복마다 점수와 현재 프롬프트 상태를 보여주세요
